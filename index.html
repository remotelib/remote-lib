<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="./">
  <title data-ice="title">Manual | RemoteLib</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="Run remote JavaScript code as if it&apos;s your own local library."><meta property="twitter:card" content="summary"><meta property="twitter:title" content="RemoteLib"><meta property="twitter:description" content="Run remote JavaScript code as if it&apos;s your own local library."></head>
<body class="layout-container manual-root manual-index" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/remotelib/remote-lib"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div class="manual-toc-root">
  
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/remote-lib.html"><a href="manual/remote-lib.html" data-ice="link">Remote-lib</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/remote-lib.html"><a href="manual/remote-lib.html#install" data-ice="link">Install</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/remote-lib.html"><a href="manual/remote-lib.html#usage" data-ice="link">Usage</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/remote-lib.html"><a href="manual/remote-lib.html#on-the-server" data-ice="link">On the server</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/remote-lib.html"><a href="manual/remote-lib.html#on-the-client" data-ice="link">On the client</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/remote-lib.html"><a href="manual/remote-lib.html#api-reference" data-ice="link">API Reference</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/remote-context.html"><a href="manual/remote-context.html" data-ice="link">Remote-context</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/remote-context.html"><a href="manual/remote-context.html#install" data-ice="link">Install</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/remote-context.html"><a href="manual/remote-context.html#usage" data-ice="link">Usage</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/remote-context.html"><a href="manual/remote-context.html#on-the-server" data-ice="link">On the server</a></li>
<li data-ice="manualNav" class="indent-h3" data-link="manual/remote-context.html"><a href="manual/remote-context.html#on-the-client" data-ice="link">On the client</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/remote-context.html"><a href="manual/remote-context.html#supported-environments" data-ice="link">Supported Environments</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/remote-context.html"><a href="manual/remote-context.html#api-reference" data-ice="link">API Reference</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/remote-environment.html"><a href="manual/remote-environment.html" data-ice="link">Remote-environment</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/remote-environment.html"><a href="manual/remote-environment.html#install" data-ice="link">Install</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/remote-environment.html"><a href="manual/remote-environment.html#usage" data-ice="link">Usage</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/remote-environment.html"><a href="manual/remote-environment.html#supported-environments" data-ice="link">Supported Environments</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/remote-environment.html"><a href="manual/remote-environment.html#api-reference" data-ice="link">API Reference</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/remote-instance.html"><a href="manual/remote-instance.html" data-ice="link">Remote-instance</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/remote-instance.html"><a href="manual/remote-instance.html#install" data-ice="link">Install</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/remote-instance.html"><a href="manual/remote-instance.html#usage" data-ice="link">Usage</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/remote-instance.html"><a href="manual/remote-instance.html#api-reference" data-ice="link">API Reference</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/remote-protocol.html"><a href="manual/remote-protocol.html" data-ice="link">Remote-protocol</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/remote-protocol.html"><a href="manual/remote-protocol.html#install" data-ice="link">Install</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/remote-protocol.html"><a href="manual/remote-protocol.html#usage" data-ice="link">Usage</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/remote-protocol.html"><a href="manual/remote-protocol.html#api-reference" data-ice="link">API Reference</a></li>
</ul>
  </div>
<div data-ice="manual">
    <ul class="manual-toc">
      
    <li data-ice="manualNav" class="indent-h1" data-link="manual/reference-context.html"><a href="manual/reference-context.html" data-ice="link">Reference-context</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/reference-context.html"><a href="manual/reference-context.html#install" data-ice="link">Install</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/reference-context.html"><a href="manual/reference-context.html#usage" data-ice="link">Usage</a></li>
<li data-ice="manualNav" class="indent-h2" data-link="manual/reference-context.html"><a href="manual/reference-context.html#api-reference" data-ice="link">API Reference</a></li>
</ul>
  </div>
</div>
</nav>

<div class="content" data-ice="content"><div class="github-markdown">
  <div class="manual-user-index" data-ice="manualUserIndex"><p></p><h1>
  <br>
  <a href="http://www.remotelib.com"><img src="https://github.com/remotelib/remote-lib/raw/master/manual/asset/icon.png?docs-hack=.svg" width="200"></a>
  <br>
  RemoteLib
  <br>
  <br>
</h1>

<p></p>
<p></p><h4>Convert your JavaScript library to a remote service &#x1F4AB;.</h4>

<p></p>
<p></p><p>
<a href="https://www.npmjs.org/package/remote-lib"><img src="http://img.shields.io/npm/v/remote-lib.svg"></a>
<a href="https://travis-ci.org/remotelib/remote-lib"><img src="https://travis-ci.org/remotelib/remote-lib.svg?branch=master"></a>
<a href="https://david-dm.org/remotelib/remote-lib"><img src="https://david-dm.org/remotelib/remote-lib.svg"></a>
<a href="https://codecov.io/gh/remotelib/remote-lib"><img src="https://codecov.io/gh/remotelib/remote-lib/branch/master/graph/badge.svg"></a>
<a href="LICENSE"><img src="https://img.shields.io/npm/l/remote-lib.svg"></a>
</p>
<br><p></p>
<p><strong>RemoteLib</strong> is a library that can be shared remotely with other peers without worrying for API 
interfaces or RPC integration. Using only a 
<a href="https://nodejs.org/api/stream.html#stream_class_stream_duplex">Duplex stream</a>, such as 
<a href="https://nodejs.org/api/net.html#net_net_createconnection_options_connectlistener">TCP socket</a>, 
<a href="https://www.npmjs.com/package/websocket-stream">WebSocket</a> or even 
<a href="https://www.npmjs.com/package/simple-peer">WebRTC DataChannel</a>, your users 
will be able to use your code remotely exactly as if it&apos;s local library. This, including calling 
functions with callbacks, 
<a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise">Promises</a>, 
class inheritance, getters and setters support and more. See <a href="#usage">usage</a> for some examples.</p>
<h5 id="is-it-kind-of-rpc-">Is it kind of RPC?</h5><p>No. RemoteLib is based on <a href="packages/remote-context">remote-context</a> and won&apos;t just proxying 
your functions. Instead, you have an entirely shared context between two remote peers. See 
<a href="#features">Features</a> for more details:</p>
<h3 id="features">Features</h3><ul>
<li><strong>Use RemoteLib on node.js &amp; on the browser</strong> (just use <a href="http://browserify.org">browserify</a> or
<a href="https://webpack.js.org/">webpack</a> to create a bundle).</li>
<li><strong>Pure Javascript</strong> (Using 
<a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Proxy">ES6 Proxy</a>).</li>
<li><strong>Seamless interface</strong> (your library will be proxies AS IS to the users remotely!). </li>
<li><strong>Proxy anything</strong> - from functions and object, to classes and Promises and even 
<a href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Symbol">Symbols</a>!</li>
<li><strong>Builtin support for Promises</strong> - Resolve any path on the remote object via the <code>RemoteProxy</code> 
interface.</li>
<li><strong>Builtin support for class inheritance</strong> - Your user can use <code>instanceof</code> with the proxyied 
objects.</li>
<li><strong>Use any communication method</strong> - connect using simple <code>Stream</code> interface 
(<a href="https://www.npmjs.com/package/websocket-stream">WebSocket</a> or 
<a href="https://www.npmjs.com/package/simple-peer">WebRTC</a> implementation available).</li>
<li>Serve <strong>multiple peers</strong> in parallel.</li>
<li>Use RemoteLib for <strong>P2P projects</strong> (via the <a href="packages/remote-context"><code>remote-context</code></a> library). </li>
</ul>
<h3 id="install">Install</h3><pre><code><code class="source-code prettyprint">npm install remote-lib</code>
</code></pre><h3 id="ways-to-help">Ways to help</h3><ul>
<li><strong>Join us in <a href="https://gitter.im/remotelib/Lobby">Gitter</a></strong> to help with development or to hang out with some mad science hackers :)</li>
<li><strong><a href="https://github.com/remotelib/remote-lib/issues/new">Create a new issue</a></strong> to report bugs</li>
<li><strong><a href="https://github.com/remotelib/remote-lib/issues?state=open">Fix an issue</a></strong>. RemoteLib is an OPEN Open Source Project!</li>
</ul>
<h3 id="getting-started">Getting Started</h3><h4 id="simple--quot-hello-world-quot--library">Simple &quot;Hello World&quot; library</h4><p>Create a context and a server:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">const net = require(&apos;net&apos;);
const { Library } = require(&apos;remote-lib&apos;);

// Create the library context
const library = new Library({
  hello: &apos;World!&apos;,
});

// Create a server and serve each client the context remotely
const server = net.createServer(socket =&gt; {
  library.serve(socket);
});

// Bind on port 3000
server.listen(3000);</code>
</code></pre>
<p>On the client side, we just need to connect to the server an create our remote library. Notice 
that the server and the client sharing only a single socket without any knowledge of the server 
library format. You can easily replace the socket it with 
 <a href="https://www.npmjs.com/package/websocket-stream">WebSocket</a> or even 
<a href="https://www.npmjs.com/package/simple-peer">WebRTC DataChannel</a>.</p>
<pre><code class="lang-js"><code class="source-code prettyprint">const net = require(&apos;net&apos;);
const { RemoteLibrary } = require(&apos;remote-lib&apos;);

// Connect to the server and get a stream
const socket = net.createConnection(3000);

// Create the remote library
const remoteLibrary = new RemoteLibrary(socket);

// Get the remote &quot;hello&quot; value
remoteLibrary.hello.then(value =&gt; {
  // value === &apos;World!&apos;
});</code>
</code></pre>
<h4 id="calling-remote-functions">Calling remote functions</h4><p>RemoteLib supporting calling remote functions as well:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// On the server:
const library = new Library({
  // Simple functions
  foo() {
     return &apos;bar&apos;;
  },

  // Async functions
  getData: () =&gt;
    new Promise(resolve =&gt;
      setTimeout(() =&gt; resolve({ data: &apos;Tada!&apos; }), 100),
    ),

  // Functions with callbacks
  loadInfo: callback =&gt; {
    setTimeout(callback(123), 200); // call callback after 200ms
  },

  // Functions of functions
  sum: x =&gt; y =&gt; x + y,
});</code>
</code></pre>
<pre><code class="lang-js"><code class="source-code prettyprint">// On the client:
remoteLibrary.foo().then(value =&gt; {
  // value === &apos;bar&apos; 
});

// Promises already handled for you 
remoteLibrary.getData().then(value =&gt; {
  // value == { data: &apos;Tada!&apos; }
});

// Send callback as first parameter
remoteLibrary.loadInfo(value =&gt; {
  // value === 123
}).catch(err =&gt; {
  // catch any errors while calling loadInfo()
});

remoteLibrary.sum(5).then(async sum2 =&gt; {
  await sum2(2); // 7 
});

// You can even speed things up by using the virtual-path promise:
remoteLibrary.sum(3)(2).then(value =&gt; {
  // value === 5 
});</code>
</code></pre>
<h4 id="using-remote-classes">Using remote classes</h4><p>Use can use build-in classes or create one by your own:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// On the server
class MyClass {
  constructor(i) {
    this.i = i;
  }

  inc() {
    this.i += 1;
    return this.i;
  }
}

const library = new Library({
  myClass: new MyClass(5),

  // native ES6 Set class instance
  myThings: new Set([&apos;car&apos;, &apos;keys&apos;, &apos;pizza&apos;]),
});</code>
</code></pre>
<pre><code class="lang-js"><code class="source-code prettyprint">// On the client:
remoteLibrary.myClass.then(async myClass =&gt; {
  // myClass.i === 5

  // Call methods with async promises
  await myClass.inc(); // 6
  // myClass.i === 6 
});

remoteLibrary.myThings.then(async myThings =&gt; {
  myThings instanceof Set; // true

  // Access cached getters instantly
  myThings.size; // 3

  await myThings.has(&apos;keys&apos;); // true
  await myThings.has(&apos;cat&apos;); // false

  await myThings.add(&apos;dog&apos;);
  await myThings.has(&apos;dog&apos;); // true
});</code>
</code></pre>
<h4 id="handling-errors">Handling errors</h4><p>RemoteLib catch all the errors for you and deliver them back to the user as-if they happens on 
the client:</p>
<pre><code class="lang-js"><code class="source-code prettyprint">// On the server:
const library = new Library({
  doNotCallMe() {
     throw ReferenceError(&apos;I told you! :)&apos;);
  },
});</code>
</code></pre>
<pre><code class="lang-js"><code class="source-code prettyprint">// On the client:
remoteLibrary.doNotCallMe().catch(err =&gt; {
  err instanceof ReferenceError; // true
  err.message; // &quot;I told you! :)&quot;
});

remoteLibrary.notExistsFunction().catch(err =&gt; {
  err instanceof TypeError; // true
  err.message; // &quot;notExistsFunction is not a function&quot;
});</code>
</code></pre>
<h3 id="api-reference">API Reference</h3><p>Remote-lib is build with many small sub-packages, each package implement a small part of this library.
You can read here the <a href="http://www.remotelib.com">full API Reference</a>.</p>
<table>
<thead>
<tr>
<th>module</th>
<th>version</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong><a href="packages/remote-lib">remote-lib</a></strong></td>
<td><a href="https://www.npmjs.org/package/remote-lib"><img src="http://img.shields.io/npm/v/remote-lib.svg" alt="view on npm"></a></td>
<td>A high level API for creating remote libraries.</td>
</tr>
<tr>
<td><strong><a href="packages/remote-context">remote-context</a></strong></td>
<td><a href="https://www.npmjs.org/package/remote-context"><img src="http://img.shields.io/npm/v/remote-context.svg" alt="view on npm"></a></td>
<td>The core of <code>remote-lib</code>, creating and serving remote context.</td>
</tr>
<tr>
<td><strong><a href="packages/remote-environment">remote-environment</a></strong></td>
<td><a href="https://www.npmjs.org/package/remote-environment"><img src="http://img.shields.io/npm/v/remote-environment.svg" alt="view on npm"></a></td>
<td>A shared environment context between remote peers.</td>
</tr>
<tr>
<td><strong><a href="packages/remote-instance">remote-instance</a></strong></td>
<td><a href="https://www.npmjs.org/package/remote-instance"><img src="http://img.shields.io/npm/v/remote-instance.svg" alt="view on npm"></a></td>
<td>A stream transformer that can parse and <code>construct</code> instances remotely.</td>
</tr>
<tr>
<td><strong><a href="packages/remote-protocol">remote-protocol</a></strong></td>
<td><a href="https://www.npmjs.org/package/remote-protocol"><img src="http://img.shields.io/npm/v/remote-protocol.svg" alt="view on npm"></a></td>
<td>The core of <code>remote-context</code> protocol.</td>
</tr>
<tr>
<td><strong><a href="packages/reference-context">reference-context</a></strong></td>
<td><a href="https://www.npmjs.org/package/reference-context"><img src="http://img.shields.io/npm/v/reference-context.svg" alt="view on npm"></a></td>
<td>Virtual context implementation on vanilla Javascript.</td>
</tr>
</tbody>
</table>
<h3 id="license">License</h3><p>&#xA9; 2017 Moshe Simantov</p>
<p>Licensed under the <a href="LICENSE">Apache License, Version 2.0</a>.</p>
</div>

  

  <div class="manual-cards">
    
  <div class="manual-card-wrap" data-ice="cards">
      <div class="manual-card">
        <div data-ice="card"><h1>Remote-lib</h1><p>Convert your JavaScript library to a remote service &#x1F4AB;.</p><p>Using only a <a href="https://nodejs.org/api/stream.html#stream_class_stream_duplex">Duplex stream</a> such as 
<a href="https://nodejs.org/api/net.html#net_net_createconnection_options_connectlistener">TCP soocket</a>, 
<a href="https://www.npmj.com/package/websocket-stream">WebSocket</a> or even 
<a href="https://www.npmjs.com/package/simple-peer">WebRTC DataChannel</a> with this library you can just share
your code with other peers without worrying for API interfaces or RPC integration. Your users 
will be able to use your code remotely exactly as you write it. Including calling functions with 
callbacks, Promises, class inheritance and more.</p><p>This library is based on the <a href="https://www.npmjs.org/package/remote-context">remote-context</a> module.</p><h2>Install</h2><pre><code><code class="source-code prettyprint">npm install remote-lib</code>
</code></pre><h2>Usage</h2><h3>On the server</h3><pre><code class="lang-js"><code class="source-code prettyprint">const net = require(&apos;net&apos;);
const { Library } = require(&apos;remote-lib&apos;);

// You can put any object, class or instance under the context and it will be proxied to the
// remote peer automatically
const library = new Library({
  // Static vars
  foo: &apos;bar&apos;,

  // Dynamic functions
  getRandom: () =&gt; Math.random(),

  // Async functions
  getData: () =&gt;
    new Promise(resolve =&gt;
      setTimeout(() =&gt; resolve({ data: &apos;Tada!&apos; }), 100),
    ),

  // Classes and objects
  myThings: new Set([&apos;car&apos;, &apos;keys&apos;, &apos;pizza&apos;]),


  // Functions that return functions
  multiFunc: () =&gt; () =&gt; &apos;Yes!&apos;,
});

// Create a server and serve each client the context remotely
const server = net.createServer(socket =&gt; {
  library.serve(socket);
});

// Bind on port 3000
server.listen(3000);</code>
</code></pre><h3>On the client</h3><pre><code class="lang-js"><code class="source-code prettyprint">const net = require(&apos;net&apos;);
const { RemoteLibrary } = require(&apos;remote-lib&apos;);

// Connect to the server and get a stream
const socket = net.createConnection(3000);

// Create the remote library
const remoteLibrary = new RemoteLibrary(socket);

// Get the remote &quot;foo&quot;
remoteLibrary.foo.then(value =&gt; {
  // value === &apos;bar&apos;
});

// Run the remote function &quot;getRandom&quot;
remoteLibrary.getRandom().then(value =&gt; {
  // `value` is random number
});

// Run the remote async function &quot;getData&quot;
remoteLibrary.getData().then(value =&gt; {
  // value === { data: &apos;Tada!&apos; }
});

// Get remote instance set &quot;myThings&quot;
remoteLibrary.myThings.then(async set =&gt; {
  set instanceof Set; // true

  // Access getters and data properties instantly
  set.size; // 3

  // Call methods with async promises
  await set.has(&apos;keys&apos;); // true
  await set.has(&apos;cat&apos;); // false

  // Change the remote instance
  await set.add(&apos;dog&apos;);
  await set.has(&apos;dog&apos;); // true
});

// Use RemotePromise virtual path:
remoteLibrary.multiFunc()().then(value =&gt; {
  // value === &apos;Yes!&apos;
});</code>
</code></pre><h2>API Reference</h2><p>This module is a part of the <a href="http://www.remotelib.com"><code>remote-lib</code></a> library.</p><p>Here is the relevant documentation for this module:</p><ul>
<li><a href="http://www.remotelib.com/class/packages/remote-lib/src/Library.js~Library.html"><code>Library</code></a></li>
<li><a href="http://www.remotelib.com/class/packages/remote-lib/src/RemoteLibrary.js~RemoteLibrary.html"><code>RemoteLibrary</code></a></li>
</ul><p><br>
<br></p><hr><p>&#xA9; 2017 Moshe Simantov</p><p>Licensed under the <a href="./manual/LICENSE">Apache License, Version 2.0</a>.</p></div>
        <a data-ice="link" href="manual/remote-lib.html"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <div class="manual-card">
        <div data-ice="card"><h1>Remote-context</h1><p>Create a virtual context and share it remotely with other peers via <strong>ANY</strong> stream object &#x1F4AB;.</p><p>Using only a <a href="https://nodejs.org/api/stream.html#stream_class_stream_duplex">Duplex stream</a> such as 
<a href="https://nodejs.org/api/net.html#net_net_createconnection_options_connectlistener">TCP soocket</a>, 
<a href="https://www.npmj.com/package/websocket-stream">WebSocket</a> or even 
<a href="https://www.npmjs.com/package/simple-peer">WebRTC DataChannel</a> with this library you can just share
your code with other peers without worrying for API interfaces or RPC integration. Your users 
will be able to use your code remotely exactly as you write it. Including calling functions with 
callbacks, Promises, class inheritance and more.</p><p>This library is the core of <a href="https://www.npmjs.org/package/remote-lib">remote-lib</a> module.</p><h2>Install</h2><pre><code><code class="source-code prettyprint">npm install remote-context</code>
</code></pre><h2>Usage</h2><h3>On the server</h3><pre><code class="lang-js"><code class="source-code prettyprint">const net = require(&apos;net&apos;);

// Get the context and the environment
const { Context } = require(&apos;remote-context&apos;);
const envContext = require(&apos;remote-context/envs/es6-unstable&apos;);

// Create a new context under ES6 environment.
// You can put any object, class or instance under the context and it will be proxied to the
// remote peer automatically
const context = new Context(envContext, {
  // Static vars
  foo: &apos;bar&apos;,

  // Dynamic functions
  getRandom: () =&gt; Math.random(),

  // Async functions
  getData: () =&gt;
    new Promise(resolve =&gt;
      setTimeout(() =&gt; resolve({ data: &apos;Tada!&apos; }), 100),
    ),

  // Classes and objects
  myThings: new Set([&apos;car&apos;, &apos;keys&apos;, &apos;pizza&apos;]),
});

// Create a server and serve each client the context remotely
const server = net.createServer(socket =&gt; {
  context.remote(socket);
});

// Bind on port 3000
server.listen(3000);</code>
</code></pre><h3>On the client</h3><pre><code class="lang-js"><code class="source-code prettyprint">const net = require(&apos;net&apos;);

// Get the context and the environment
const { Context } = require(&apos;remote-context&apos;);
const envContext = require(&apos;remote-context/envs/es6-unstable&apos;);

// Connect to the server and get a stream
const socket = net.createConnection(3000);

// Create the remote context
const clientContext = new Context(envContext);
const remoteContext = clientContext.remote(socket);

// Get the remote &quot;foo&quot;
remoteContext.fetch(&apos;foo&apos;).then(value =&gt; {
  // value === &apos;bar&apos;
});

// Run the remote function &quot;getRandom&quot;
remoteContext.fetch(&apos;getRandom&apos;)().then(value =&gt; {
  // `value` is random number
});

// Run the remote async function &quot;getData&quot;
remoteContext.fetch(&apos;getData&apos;)().then(value =&gt; {
  // value === { data: &apos;Tada!&apos; }
});

// Get remote instance set &quot;myThings&quot;
remoteContext.fetch(&apos;myThings&apos;).then(async set =&gt; {
  set instanceof Set; // true

  // Access getters and data properties instantly
  set.size; // 3

  // Call methods with async promises
  await set.has(&apos;keys&apos;); // true
  await set.has(&apos;cat&apos;); // false

  // Change the remote instance
  await set.add(&apos;dog&apos;);
  await set.has(&apos;dog&apos;); // true
});</code>
</code></pre><h2>Supported Environments</h2><p><strong>Remote-context</strong> is currently supporting only limited number of environment contexts.
To use an environment you should require it explicitly:</p><pre><code class="lang-js"><code class="source-code prettyprint">const envContext = require(&apos;remote-context/envs/ENV_NAME&apos;);</code>
</code></pre><p>When <code>ENV_NAME</code> is the required environment name.</p><table>
<thead>
<tr>
<th>Name</th>
<th>Status</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>es6-unstable</code></td>
<td>AVAILABLE</td>
<td>A development version of ES6 context. This environment consider unstable and may change over the versions.</td>
</tr>
<tr>
<td><code>node6-unstable</code></td>
<td>IN_DEVELOPMENT</td>
<td>This environment will include all Node.js version 6 context. This environment consider unstable and may change over the versions.</td>
</tr>
</tbody>
</table><h2>API Reference</h2><p>This module is a part of the <a href="http://www.remotelib.com"><code>remote-lib</code></a> library.</p><p>Here is the relevant documentation for this module:</p><ul>
<li><a href="http://www.remotelib.com/class/packages/remote-context/src/Context.js~Context.html"><code>Context</code></a></li>
<li><a href="http://www.remotelib.com/class/packages/remote-context/src/EnvContext.js~EnvContext.html"><code>EnvContext</code></a></li>
<li><a href="http://www.remotelib.com/class/packages/remote-context/src/RemoteContext.js~RemoteContext.html"><code>RemoteContext</code></a></li>
<li><a href="http://www.remotelib.com/class/packages/remote-context/src/RemoteSession.js~RemoteSession.html"><code>RemoteSession</code></a></li>
<li><a href="http://www.remotelib.com/typedef/index.html#static-typedef-es6UnstableEnv"><code>es6UnstableEnv</code></a></li>
<li><a href="http://www.remotelib.com/class/packages/remote-context/src/RemoteValue.js~RemoteValue.html#static-method-observe"><code>observe</code></a></li>
</ul><p><br>
<br></p><hr><p>&#xA9; 2017 Moshe Simantov</p><p>Licensed under the <a href="./manual/LICENSE">Apache License, Version 2.0</a>.</p></div>
        <a data-ice="link" href="manual/remote-context.html"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <div class="manual-card">
        <div data-ice="card"><h1>Remote-environment</h1><p>The complete context dictionary for given environment &#x1F4AB;.</p><p>This library contain a key-value map of the requested context, accessing the objects with their 
real paths such as <code>&quot;Object.getPrototypeOf&quot;</code>. All the contexts include only a variables that are 
unique for this environment and can&apos;t recreate again manually. For Example, the PI number 
<code>3.141592653589793</code> is not a unique variable but the function <code>Math.sin</code> is unique and therefore 
will be available under the path <code>&quot;Math.sin&quot;</code>.</p><h2>Install</h2><pre><code><code class="source-code prettyprint">npm install remote-environment</code>
</code></pre><h2>Usage</h2><pre><code class="lang-js"><code class="source-code prettyprint">// Load the requested environment 
const context = require(&apos;remote-environment/es6&apos;);

// Access the environment objects
context[&apos;Object&apos;]; // equals to `Object`
context[&apos;Math.sin&apos;]; // equals to `Math.sin`
context[&apos;Promise.resolve&apos;]; // equals to `Promise.resolve`
context[&apos;Function.prototype&apos;]; // equals to `Function.prototype`</code>
</code></pre><h2>Supported Environments</h2><p><strong>Remote-environment</strong> is currently supporting only limited number of environment contexts.
To use an environment you should require it explicitly:</p><pre><code class="lang-js"><code class="source-code prettyprint">const context = require(&apos;remote-environment/ENV_NAME&apos;);</code>
</code></pre><p>When <code>ENV_NAME</code> is the required environment name.</p><table>
<thead>
<tr>
<th>Name</th>
<th>Status</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>es6</code></td>
<td>UNSTABLE</td>
<td>An ES6 context. This environment consider unstable and may change over the versions.</td>
</tr>
</tbody>
</table><h2>API Reference</h2><p>This module is a part of the <a href="http://www.remotelib.com"><code>remote-lib</code></a> library.</p><p>Here is the relevant documentation for this module:</p><ul>
<li><a href="http://www.remotelib.com/typedef/index.html#static-typedef-es6"><code>es6</code></a></li>
</ul><p><br>
<br></p><hr><p>&#xA9; 2017 Moshe Simantov</p><p>Licensed under the <a href="./manual/LICENSE">Apache License, Version 2.0</a>.</p></div>
        <a data-ice="link" href="manual/remote-environment.html"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <div class="manual-card">
        <div data-ice="card"><h1>Remote-instance</h1><p>With this library you can encode and transfer instances remotely &#x1F4AB;.</p><p>Remote instances will be just like if they created locally.
To create a remote instance all you need to do is:</p><ol>
<li><strong>Optional</strong> - Implement a <em>static</em> method <code>fromArgumentsList()</code> on the constructor of the 
instance. This method will receive an array of arguments as first argument and should return 
a new instance accordingly. If this method those not exists, the arguments will apply on the 
instance constrictor (see <a href="#usage">example</a> bellow).</li>
<li>Implement a method <code>toArgumentsList()</code> on the instance which return array of arguments of any 
kind (including other instances!) to recreate this instance remotely via the <code>fromArgumentsList()</code> 
method.</li>
<li>Register the instance constructor on the parser with a unique single byte-code that is well known
to each peer (see <a href="#usage">example</a> bellow).</li>
</ol><p>That&apos;s it!</p><p>You can use the parser method <code>parser.transform(stream)</code> to convert a duplex buffer stream to an 
object 
mode stream transformed by the parser (see <a href="#api-reference">API Reference</a> for more details).   </p><h2>Install</h2><pre><code><code class="source-code prettyprint">npm install remote-instance</code>
</code></pre><h2>Usage</h2><pre><code class="lang-js"><code class="source-code prettyprint">const Parser = require(&apos;remote-instance&apos;);

// Create test class
class Foo {
  constructor(bar) {
    this.bar = bar;
  }

  // Tel the parser how to rebuild this class remotely
  toArgumentsList() {
    return [this.bar];
  }
}

// Create a parser instance and register our class
const parser = new Parser();
parser.register(0x01, Foo);

// create an instance and encode it
const foo = new Foo({ test: &apos;myThing&apos; });
const buffer = parser.encode(foo);

// decode and recreate the instance
const decodedFoo = parser.decode(buffer);

// `decodedFoo` is not foo but an exact copy of Foo
decodedFoo !== foo; // true
decodedFoo instanceof Foo; // true
decodedFoo.bar; // { test: &apos;myThing&apos; }</code>
</code></pre><h2>API Reference</h2><p>This module is a part of the <a href="http://www.remotelib.com"><code>remote-lib</code></a> library.</p><p>Here is the relevant documentation for this module:</p><ul>
<li><a href="http://www.remotelib.com/class/packages/remote-instance/src/parser.js~Parser.html"><code>Parser</code></a></li>
</ul><p><br>
<br></p><hr><p>&#xA9; 2017 Moshe Simantov</p><p>Licensed under the <a href="./manual/LICENSE">Apache License, Version 2.0</a>.</p></div>
        <a data-ice="link" href="manual/remote-instance.html"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <div class="manual-card">
        <div data-ice="card"><h1>Remote-protocol</h1><p>Enable peer to create session with other peer and executing actions remotely &#x1F4AB;. </p><p>To create a session you should supply an duplex stream with <code>objectMode</code> turn on. See the 
<a href="https://www.npmjs.org/package/remote-instance"><code>remote-instance</code></a> module for a possible 
implementation.</p><p>All the communication between the peers handled by actions. An <code>Action</code> is simple class with a 
<code>fetch</code> and / or <code>exec</code> methods that the peers can use. The protocol has build-in support for 
requests and responses in order to fetch actions remotely.</p><h2>Install</h2><pre><code><code class="source-code prettyprint">npm install remote-protocol</code>
</code></pre><h2>Usage</h2><pre><code class="lang-js"><code class="source-code prettyprint">const { Session, Action } = require(&apos;remote-protocol&apos;);

class FooAction extends Action {
  fetch() {
    return Math.random();
  }
}

// create an object mode stream that&apos;s bind to itself as-if other peer send the object
const objectStream = new PassThrough({ objectMode: true });

// create a session
const session = new Session(objectStream);

session.request(
  new FooAction(),
  result =&gt; {
    // `result` is random number
  },
  error =&gt; {
    // handle request error
  },
);</code>
</code></pre><h2>API Reference</h2><p>This module is a part of the <a href="http://www.remotelib.com"><code>remote-lib</code></a> library.</p><p>Here is the relevant documentation for this module:</p><ul>
<li><a href="http://www.remotelib.com/class/packages/remote-protocol/src/Session.js~Session.html"><code>Session</code></a></li>
<li><a href="http://www.remotelib.com/class/packages/remote-protocol/src/actions/Action.js~Action.html"><code>Action</code></a><ul>
<li><a href="http://www.remotelib.com/class/packages/remote-protocol/src/actions/RequestAction.js~RequestAction.html"><code>RequestAction</code></a></li>
<li><a href="http://www.remotelib.com/class/packages/remote-protocol/src/actions/ResponseAction.js~ResponseAction.html"><code>RequestAction</code></a></li>
</ul>
</li>
</ul><p><br>
<br></p><hr><p>&#xA9; 2017 Moshe Simantov</p><p>Licensed under the <a href="./manual/LICENSE">Apache License, Version 2.0</a>.</p></div>
        <a data-ice="link" href="manual/remote-protocol.html"></a>
      </div>
    </div>
<div class="manual-card-wrap" data-ice="cards">
      <div class="manual-card">
        <div data-ice="card"><h1>Reference-context</h1><p>Creates a virtual context that can hold values with given references &#x1F4AB;.</p><p><strong>Reference-context</strong> allows you to lookup values on the context, get the number of references or
values currently on the context and even assign a new unique reference to a given value.</p><p>This library is the core context of the libraries 
<a href="https://www.npmjs.org/package/remote-lib">remote-lib</a> and 
<a href="https://www.npmjs.org/package/remote-context">remote-context</a>.</p><h2>Install</h2><pre><code><code class="source-code prettyprint">npm install reference-context</code>
</code></pre><h2>Usage</h2><pre><code class="lang-js"><code class="source-code prettyprint">const ReferenceContext = require(&apos;reference-context&apos;);

class Foo {}
const foo = new Foo();

const parent = new ReferenceContext({ Object });
const referenceContext = new ReferenceContext({ foo }, parent);

parent.count; // 1
referenceContext.count; // 2
referenceContext.ownCount; // 1

referenceContext.has(&apos;Object&apos;); // true
referenceContext.hasOwnReference(&apos;Object&apos;); // false
referenceContext.hasOwnReference(&apos;foo&apos;); // true

referenceContext.exists(Object); // true
referenceContext.own(Object); // false

referenceContext.get(&apos;Object&apos;); // Object
referenceContext.get(&apos;foo&apos;); // foo

referenceContext.lookup(Object); // &quot;Object&quot;
referenceContext.lookup(foo); // &quot;foo&quot;</code>
</code></pre><h2>API Reference</h2><p>This module is a part of the <a href="http://www.remotelib.com"><code>remote-lib</code></a> library.</p><p>Here is the relevant documentation for this module:</p><ul>
<li><a href="http://www.remotelib.com/class/packages/reference-context/src/reference-context.js~ReferenceContext.html"><code>ReferenceContext</code></a></li>
</ul><p><br>
<br></p><hr><p>&#xA9; 2017 Moshe Simantov</p><p>Licensed under the <a href="./manual/LICENSE">Apache License, Version 2.0</a>.</p></div>
        <a data-ice="link" href="manual/reference-context.html"></a>
      </div>
    </div>
</div>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.0.4)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
